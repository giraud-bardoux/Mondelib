/**
 * PhotoFloue Module v1.3.0 - Styles CSS
 * Floutage et protection simplifiés pour SocialEngine 7.4
 */

/* ===== FLOUTAGE DES PHOTOS POUR VISITEURS NON CONNECTÉS ===== */

/* Floutage des photos d'albums */
body.photofloue-user-not-logged-in .bg_item_photo_album_photo,
body.photofloue-user-not-logged-in .bg_item_photo,
body.photofloue-user-not-logged-in .thumbs_photo .bg_item_photo_album_photo {
    filter: blur(10px) !important;
    -webkit-filter: blur(10px) !important;
    -moz-filter: blur(10px) !important;
    -ms-filter: blur(10px) !important;
    transition: filter 0.3s ease !important;
}

/* Floutage des photos de profil */
body.photofloue-user-not-logged-in .profile_photo img,
body.photofloue-user-not-logged-in .user_sidebar_photo img,
body.photofloue-user-not-logged-in .avatar img {
    filter: blur(10px) !important;
    -webkit-filter: blur(10px) !important;
    -moz-filter: blur(10px) !important;
    -ms-filter: blur(10px) !important;
    transition: filter 0.3s ease !important;
}

/* Floutage des miniatures */
body.photofloue-user-not-logged-in .thumbs_photo,
body.photofloue-user-not-logged-in .thumb,
body.photofloue-user-not-logged-in .photo_thumb {
    filter: blur(10px) !important;
    -webkit-filter: blur(10px) !important;
    transition: filter 0.3s ease !important;
}

/* ===== PROTECTION ANTI-CAPTURE ===== */

/* Protection générale */
body.photofloue-user-not-logged-in .bg_item_photo_album_photo,
body.photofloue-user-not-logged-in .profile_photo,
body.photofloue-user-not-logged-in .thumbs_photo {
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
    user-select: none !important;
    -webkit-touch-callout: none !important;
    -webkit-tap-highlight-color: transparent !important;
    position: relative;
}

/* Empêcher la sélection du texte sur les conteneurs */
body.photofloue-user-not-logged-in .bg_item_photo_album_photo *,
body.photofloue-user-not-logged-in .profile_photo *,
body.photofloue-user-not-logged-in .thumbs_photo * {
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
    user-select: none !important;
}

/* Protection contre le drag & drop */
body.photofloue-user-not-logged-in .bg_item_photo_album_photo,
body.photofloue-user-not-logged-in .profile_photo img,
body.photofloue-user-not-logged-in .thumbs_photo {
    -webkit-user-drag: none !important;
    -moz-user-drag: none !important;
    user-drag: none !important;
    draggable: false !important;
}

/* ===== MESSAGES D'INCITATION ===== */

/* Message au survol des photos d'albums */
body.photofloue-user-not-logged-in .bg_item_photo_album_photo::after {
    content: 'Connectez-vous pour voir les photos nettes';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 12px 16px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    white-space: nowrap;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

body.photofloue-user-not-logged-in .bg_item_photo_album_photo:hover::after {
    opacity: 1;
}

/* Message au survol des photos de profil */
body.photofloue-user-not-logged-in .profile_photo::after {
    content: 'Connectez-vous pour voir clairement';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.85);
    color: white;
    padding: 8px 12px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

body.photofloue-user-not-logged-in .profile_photo:hover::after {
    opacity: 1;
}

/* ===== VARIATIONS D'INTENSITÉ DU FLOU ===== */

/* Flou léger (classes avec .photofloue-blur-light) */
body.photofloue-user-not-logged-in .photofloue-blur-light {
    filter: blur(5px) !important;
    -webkit-filter: blur(5px) !important;
}

/* Flou moyen (défaut) */
body.photofloue-user-not-logged-in .photofloue-blur-medium {
    filter: blur(10px) !important;
    -webkit-filter: blur(10px) !important;
}

/* Flou fort (classes avec .photofloue-blur-heavy) */
body.photofloue-user-not-logged-in .photofloue-blur-heavy {
    filter: blur(15px) !important;
    -webkit-filter: blur(15px) !important;
}

/* ===== PROTECTION PRINT ===== */

@media print {
    body.photofloue-user-not-logged-in .bg_item_photo_album_photo,
    body.photofloue-user-not-logged-in .profile_photo img,
    body.photofloue-user-not-logged-in .thumbs_photo {
        filter: blur(20px) !important;
        -webkit-filter: blur(20px) !important;
    }
    
    body.photofloue-user-not-logged-in .bg_item_photo_album_photo::after {
        content: 'Photo protégée - Connectez-vous sur le site';
        display: block !important;
        opacity: 1 !important;
        position: static !important;
        transform: none !important;
        background: #000 !important;
        color: #fff !important;
        text-align: center !important;
        padding: 20px !important;
        font-size: 16px !important;
    }
}

/* ===== RESPONSIVE MOBILE ===== */

@media (max-width: 768px) {
    /* Messages plus petits sur mobile */
    body.photofloue-user-not-logged-in .bg_item_photo_album_photo::after {
        font-size: 11px;
        padding: 8px 12px;
    }
    
    body.photofloue-user-not-logged-in .profile_photo::after {
        font-size: 10px;
        padding: 6px 10px;
    }
    
    /* Protection tactile renforcée */
    body.photofloue-user-not-logged-in .bg_item_photo_album_photo,
    body.photofloue-user-not-logged-in .profile_photo,
    body.photofloue-user-not-logged-in .thumbs_photo {
        -webkit-touch-callout: none !important;
        -webkit-user-select: none !important;
        -webkit-tap-highlight-color: rgba(0,0,0,0) !important;
        touch-action: manipulation !important;
    }
}

/* ===== ANIMATIONS SUBTILES ===== */

body.photofloue-user-not-logged-in .bg_item_photo_album_photo,
body.photofloue-user-not-logged-in .profile_photo img,
body.photofloue-user-not-logged-in .thumbs_photo {
    transition: filter 0.3s ease, transform 0.2s ease !important;
}

/* Effet subtil au survol */
body.photofloue-user-not-logged-in .bg_item_photo_album_photo:hover,
body.photofloue-user-not-logged-in .profile_photo:hover {
    transform: scale(1.02);
}

/* ===== ACCESSIBILITÉ ===== */

/* Mode contraste élevé */
@media (prefers-contrast: high) {
    body.photofloue-user-not-logged-in .bg_item_photo_album_photo::after,
    body.photofloue-user-not-logged-in .profile_photo::after {
        background: #000 !important;
        border: 2px solid #fff !important;
        font-weight: bold !important;
    }
}

/* Mode mouvement réduit */
@media (prefers-reduced-motion: reduce) {
    body.photofloue-user-not-logged-in .bg_item_photo_album_photo,
    body.photofloue-user-not-logged-in .profile_photo img,
    body.photofloue-user-not-logged-in .thumbs_photo,
    body.photofloue-user-not-logged-in .bg_item_photo_album_photo::after,
    body.photofloue-user-not-logged-in .profile_photo::after {
        transition: none !important;
    }
}

/* ===== COMPATIBILITÉ NAVIGATEURS ===== */

/* Support Internet Explorer (si nécessaire) */
body.photofloue-user-not-logged-in .bg_item_photo_album_photo,
body.photofloue-user-not-logged-in .profile_photo img,
body.photofloue-user-not-logged-in .thumbs_photo {
    /* Fallback pour IE qui ne supporte pas filter */
    opacity: 0.3;
}

/* Support moderne des navigateurs */
@supports (filter: blur(10px)) {
    body.photofloue-user-not-logged-in .bg_item_photo_album_photo,
    body.photofloue-user-not-logged-in .profile_photo img,
    body.photofloue-user-not-logged-in .thumbs_photo {
        opacity: 1; /* Annuler le fallback IE */
    }
}

/* ===== PERFORMANCE ===== */

/* Optimisation GPU pour les transitions */
body.photofloue-user-not-logged-in .bg_item_photo_album_photo,
body.photofloue-user-not-logged-in .profile_photo img,
body.photofloue-user-not-logged-in .thumbs_photo {
    will-change: filter;
    transform: translateZ(0); /* Force GPU */
}

/* Mode sombre (si supporté par le thème) */
@media (prefers-color-scheme: dark) {
    body.photofloue-user-not-logged-in .bg_item_photo_album_photo::after,
    body.photofloue-user-not-logged-in .profile_photo::after {
        background: rgba(255, 255, 255, 0.9);
        color: #000;
    }
}